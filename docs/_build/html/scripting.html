

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>scripting module &mdash; IonControl 0.8 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="IonControl 0.8 documentation" href="index.html"/>
        <link rel="up" title="Code Documentation" href="docs.html"/>
        <link rel="prev" title="Code Documentation" href="docs.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> IonControl
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimentUi_manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="instrumentLoggerUi_manual.html">Instrument Logger User Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="docs.html">Code Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">scripting module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-scripting.ScriptingUi">scripting.ScriptingUi</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-scripting.Script">scripting.Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-scripting.ScriptHandler">scripting.ScriptHandler</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">IonControl</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="docs.html">Code Documentation</a> &raquo;</li>
      
    <li>scripting module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/scripting.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scripting-module">
<h1>scripting module<a class="headerlink" href="#scripting-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-scripting.ScriptingUi">
<span id="scripting-scriptingui"></span><h2>scripting.ScriptingUi<a class="headerlink" href="#module-scripting.ScriptingUi" title="Permalink to this headline">¶</a></h2>
<p>Created on Jul 24, 2015</p>
<p>&#64;author: jmizrahi</p>
<dl class="class">
<dt id="scripting.ScriptingUi.ScriptingUi">
<em class="property">class </em><code class="descname">ScriptingUi</code><span class="sig-paren">(</span><em>experimentUi</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi" title="Permalink to this definition">¶</a></dt>
<dd><p>Ui for the scripting interface.</p>
<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.enableScriptChange">
<code class="descname">enableScriptChange</code><span class="sig-paren">(</span><em>enabled</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.enableScriptChange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.enableScriptChange" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable or disable any changes to script editor</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.getDocs">
<code class="descname">getDocs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.getDocs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.getDocs" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble the script function documentation into a dictionary</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.loadFile">
<code class="descname">loadFile</code><span class="sig-paren">(</span><em>fullname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.loadFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.loadFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Load in a file.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.markError">
<code class="descname">markError</code><span class="sig-paren">(</span><em>lines</em>, <em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.markError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.markError" title="Permalink to this definition">¶</a></dt>
<dd><p>mark error at specified lines, and show message</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.markLocation">
<code class="descname">markLocation</code><span class="sig-paren">(</span><em>lines</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.markLocation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.markLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>mark a specified location</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onFilenameChange">
<code class="descname">onFilenameChange</code><span class="sig-paren">(</span><em>shortname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onFilenameChange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onFilenameChange" title="Permalink to this definition">¶</a></dt>
<dd><p>A name is typed into the filename combo box.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onFinished">
<code class="descname">onFinished</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onFinished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onFinished" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when script thread finishes. re-enables script GUI.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onLoad">
<code class="descname">onLoad</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onLoad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>The load button is clicked. Open file prompt for file.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onNew">
<code class="descname">onNew</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onNew"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onNew" title="Permalink to this definition">¶</a></dt>
<dd><p>New button is clicked. Pop up dialog asking for new name, and create file.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onPauseScript">
<code class="descname">onPauseScript</code><span class="sig-paren">(</span><em>paused</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onPauseScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onPauseScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause script button is clicked</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onPauseScriptAndScan">
<code class="descname">onPauseScriptAndScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onPauseScriptAndScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onPauseScriptAndScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause script and scan button is clicked</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onRemoveCurrent">
<code class="descname">onRemoveCurrent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onRemoveCurrent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onRemoveCurrent" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove current button is clicked. Remove file from combo box.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onRepeat">
<code class="descname">onRepeat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onRepeat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onRepeat" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeat button is clicked.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onReset">
<code class="descname">onReset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onReset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onReset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset action. Reset file state saved on disk.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onSave">
<code class="descname">onSave</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onSave"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onSave" title="Permalink to this definition">¶</a></dt>
<dd><p>Save action. Save file to disk, and clear any highlighted errors.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onSlow">
<code class="descname">onSlow</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onSlow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onSlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Slow button is clicked.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onStartScript">
<code class="descname">onStartScript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onStartScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onStartScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Start script button is clicked</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onStopScript">
<code class="descname">onStopScript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onStopScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onStopScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop script button is clicked</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.onStopScriptAndScan">
<code class="descname">onStopScriptAndScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.onStopScriptAndScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.onStopScriptAndScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop script and scan button is clicked</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.saveConfig">
<code class="descname">saveConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.saveConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.saveConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Save configuration.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptingUi.ScriptingUi.updateValidator">
<code class="descname">updateValidator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptingUi.html#ScriptingUi.updateValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptingUi.ScriptingUi.updateValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the validator match the recentFiles list. Uses regExp b(f1|f2|f3...)b, where fn are filenames.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scripting.Script">
<span id="scripting-script"></span><h2>scripting.Script<a class="headerlink" href="#module-scripting.Script" title="Permalink to this headline">¶</a></h2>
<p>Created on Jul 27, 2015</p>
<p>&#64;author: jmizrahi</p>
<dl class="class">
<dt id="scripting.Script.Script">
<em class="property">class </em><code class="descname">Script</code><span class="sig-paren">(</span><em>fullname=''</em>, <em>code=''</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulates a running script together with all the scripting functions. Script executes in separate thread.</p>
<p>The script behavior is as follows: each script function that manipulates a GUI element does so by emitting a
signal, followed by entering  QWaitCondition. The ScriptHandler responds to the signal, and wakes up the 
QWaitCondition. For access to GUI data, the script waits at a QWaitCondition until the data is available.
When the data is available, the ScriptHandler sets the script data variables appropriately, and then wakes the
wait condition. This back-and-forth handoff between the Script thread and the ScriptHandler (which lives in the
main GUI thread) is what ensures synchronicity and avoids race conditions.</p>
<p>Note that the script thread does not have an event loop. This means that it cannot respond to emitted signals,
and calls like Script.quit and Script.exit do not work. Instead, the script emits signals indicating what to
change, and then enters a QWaitCondition. The ScriptingUi responds to the signal, and tells the script to exit
the wait condition once the action has been done.</p>
<p>All the script functions are executed via the script function decorator, which simplifies the code.</p>
<dl class="method">
<dt id="scripting.Script.Script.abortScan">
<code class="descname">abortScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.abortScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.abortScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Abort the scan.</p>
<p>This is equivalent to clicking &#8220;abort&#8221; on the experiment GUI.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.addGlobal">
<code class="descname">addGlobal</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>unit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.addGlobal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.addGlobal" title="Permalink to this definition">¶</a></dt>
<dd><p>add a global &#8216;name&#8217;, set to (value, unit).</p>
<p>This is equivalent to adding a global via the globals UI,and
then setting its value in the globals table.</p>
<p>name: str
value: float
unit: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.addPlot">
<code class="descname">addPlot</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.addPlot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.addPlot" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a plot named &#8220;name&#8221;.</p>
<p>This is equivalent to clicking &#8220;add plot&#8221; on the experiment GUI.</p>
<p>name: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.createTrace">
<code class="descname">createTrace</code><span class="sig-paren">(</span><em>traceName</em>, <em>plotName</em>, <em>xUnit=''</em>, <em>xLabel=''</em>, <em>comment=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.createTrace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.createTrace" title="Permalink to this definition">¶</a></dt>
<dd><p>create a new trace with name &#8216;traceName&#8217; to be plotted on plot
&#8216;plotName&#8217; with unit &#8216;xUnit&#8217;, label &#8216;xLabel&#8217;, and comment &#8216;comment&#8217;.</p>
<p>traceName: str
plotName: str
xUnit: str
xLabel: str
comment: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.emitLocation">
<code class="descname">emitLocation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.emitLocation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.emitLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits a signal containing the current script location</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>fitName</em>, <em>traceName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit the data in &#8216;traceName&#8217; using &#8216;fitName&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.getAllData">
<code class="descname">getAllData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.getAllData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.getAllData" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the full set of data from the most recent scan.</p>
<p>Data is returned as a dictionary. The key corresponds to
the name of each evaluation in the evaluation list. The value
is a tuple (xList, yList).</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.getAnalysis">
<code class="descname">getAnalysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.getAnalysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.getAnalysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the analysis results for the most recent scan.</p>
<p>Analysis is returned as a dictionary of dictionaries. The key corresponds
to the name of each analysis in the analysis list. The value is another
dictionary, whose keys correspond to the names of fit parameters in the
specified evaluation.</p>
<p>Example: a Gaussian fit named &#8220;myFit&#8221; in the analysis, with center parameter
x0, would return its center value as getAnalysis()[&#8216;myFit&#8217;][&#8216;x0&#8217;]</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.getData">
<code class="descname">getData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.getData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the most recent data point from a running scan.</p>
<p>Data is returned as a dictionary. The key corresponds to
the name of each evaluation in the evaluation list. The value
is a tuple (x, y).</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.getScanStatus">
<code class="descname">getScanStatus</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.getScanStatus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.getScanStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current state of the scan.</p>
<p>One of &#8216;idle&#8217;, &#8216;running&#8217;, &#8216;paused&#8217;, &#8216;starting&#8217;, &#8216;stopping&#8217;, or &#8216;interrupted&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.pauseScan">
<code class="descname">pauseScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.pauseScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.pauseScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause the scan.</p>
<p>This is equivalent to clicking &#8220;pause&#8221; on the experiment GUI.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.pauseScript">
<code class="descname">pauseScript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.pauseScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.pauseScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause the script.</p>
<p>This is equivalent to clicking the &#8220;pause script&#8221; button.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.plotList">
<code class="descname">plotList</code><span class="sig-paren">(</span><em>xList</em>, <em>yList</em>, <em>traceName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.plotList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.plotList" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a set of points given in xList, yList to trace traceName.</p>
<p>x: list
y: list
traceName: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.plotPoint">
<code class="descname">plotPoint</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>traceName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.plotPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.plotPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a single point (x, y) to trace traceName.</p>
<p>x: float
y: float
traceName: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.run" title="Permalink to this definition">¶</a></dt>
<dd><p>run the script</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.scanRunning">
<code class="descname">scanRunning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.scanRunning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.scanRunning" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the scan is running. Otherwise, False.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.scriptFunction">
<code class="descname">scriptFunction</code><span class="sig-paren">(</span><em>waitForGui=True</em>, <em>waitForAnalysis=False</em>, <em>waitForData=False</em>, <em>waitForAllData=False</em>, <em>runIfStopped=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.scriptFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.scriptFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for script functions.</p>
<p>This decorator performs all the functions that are common to all the script functions. It checks
whether the script has been stopped or paused, and emits the current location in the script. Once
the function has executed, it waits to be told to continue by the main GUI. Exceptions that occur
during execution are sent back to the script thread and raised here.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.scriptIsStopped">
<code class="descname">scriptIsStopped</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.scriptIsStopped"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.scriptIsStopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the script has been stopped, Otherwise, False.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.setAnalysis">
<code class="descname">setAnalysis</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.setAnalysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.setAnalysis" title="Permalink to this definition">¶</a></dt>
<dd><p>set the analysis interface to &#8220;name.&#8221;</p>
<p>This is equivalent to selecting &#8220;name&#8221; from the analysis drop down menu.
If there is no analysis by that name, an exception is raised.</p>
<p>name: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.setEvaluation">
<code class="descname">setEvaluation</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.setEvaluation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.setEvaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>set the evaluation interface to &#8220;name.&#8221;</p>
<p>This is equivalent to selecting &#8220;name&#8221; from the evaluation drop down menu.
If there is no evaluation by that name, an exception is raised.</p>
<p>name: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.setGlobal">
<code class="descname">setGlobal</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>unit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.setGlobal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.setGlobal" title="Permalink to this definition">¶</a></dt>
<dd><p>set global &#8216;name&#8217; to (value, unit).</p>
<p>This is equivalent to typing in a value/unit in the globals table.
If there is not a global with the given name, an exception is raised.
This is to avoid typos leading to unexpected behavior. To add a global,
use &#8216;addGlobal&#8217;</p>
<p>name: str
value: float
unit: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.setScan">
<code class="descname">setScan</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.setScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.setScan" title="Permalink to this definition">¶</a></dt>
<dd><p>set the scan interface to &#8220;name.&#8221;</p>
<p>This is equivalent to selecting &#8220;name&#8221; from the scan drop down menu.
If there is no scan by that name, an exception is raised.</p>
<p>name: str</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.startScan">
<code class="descname">startScan</code><span class="sig-paren">(</span><em>wait=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.startScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.startScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the scan.</p>
<p>This is equivalent to clicking &#8220;start&#8221; on the experiment GUI. If
wait=True, the script will not continue until the scan is finished.</p>
<p>wait: bool</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.stopScan">
<code class="descname">stopScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.stopScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.stopScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the scan.</p>
<p>This is equivalent to clicking &#8220;stop&#8221; on the experiment GUI.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.stopScript">
<code class="descname">stopScript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.stopScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.stopScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the script.</p>
<p>This is equivalent to clicking the &#8220;stop script&#8221; button.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.Script.Script.waitForScan">
<code class="descname">waitForScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#Script.waitForScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.Script.waitForScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for scan to finish before continuing script.</p>
<p>If startScan is run with wait=True, this function is unnecessary.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="scripting.Script.checkScripting">
<code class="descname">checkScripting</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/Script.html#checkScripting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.Script.checkScripting" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a function has been marked as a script function</p>
</dd></dl>

</div>
<div class="section" id="module-scripting.ScriptHandler">
<span id="scripting-scripthandler"></span><h2>scripting.ScriptHandler<a class="headerlink" href="#module-scripting.ScriptHandler" title="Permalink to this headline">¶</a></h2>
<p>Created on Aug 6, 2015</p>
<p>&#64;author: jmizrahi</p>
<dl class="class">
<dt id="scripting.ScriptHandler.ScriptHandler">
<em class="property">class </em><code class="descname">ScriptHandler</code><span class="sig-paren">(</span><em>script</em>, <em>experimentUi</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>The ScriptHandler is what handles all the interfacing between the Script and the GUI. The Script
emits signals, which are picked up by the ScriptHandler, which executes the necessary changes on the
GUI.</p>
<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onAddGlobal">
<code class="descname">onAddGlobal</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onAddGlobal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onAddGlobal" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a global &#8216;name&#8217; and set it to &#8216;value, unit&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onConsoleSignal">
<code class="descname">onConsoleSignal</code><span class="sig-paren">(</span><em>message</em>, <em>error</em>, <em>color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onConsoleSignal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onConsoleSignal" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when script emits a console signal. Writes message to console.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onException">
<code class="descname">onException</code><span class="sig-paren">(</span><em>message</em>, <em>trace</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onException" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when script emits exception signal. Highlights error.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onLocation">
<code class="descname">onLocation</code><span class="sig-paren">(</span><em>locs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onLocation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark where the script currently is</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onPauseScript">
<code class="descname">onPauseScript</code><span class="sig-paren">(</span><em>paused</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onPauseScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onPauseScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when pause script button clicked. Sets paused variable and wakes up script if unpaused.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onPauseScriptAndScan">
<code class="descname">onPauseScriptAndScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onPauseScriptAndScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onPauseScriptAndScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when pause script and scan button is clicked.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onPlotList">
<code class="descname">onPlotList</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onPlotList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onPlotList" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot [x1, x2,...], [y1, y2,...] to traceName</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onPlotPoint">
<code class="descname">onPlotPoint</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onPlotPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onPlotPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot point (x,y) to traceName</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onRepeat">
<code class="descname">onRepeat</code><span class="sig-paren">(</span><em>repeat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onRepeat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onRepeat" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when repeat button is clicked. Set repeat variable.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onScanStateChanged">
<code class="descname">onScanStateChanged</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onScanStateChanged"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onScanStateChanged" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when the scan state changes</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onSetGlobal">
<code class="descname">onSetGlobal</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onSetGlobal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onSetGlobal" title="Permalink to this definition">¶</a></dt>
<dd><p>Set global &#8216;name&#8217; to &#8216;value, unit&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onSlow">
<code class="descname">onSlow</code><span class="sig-paren">(</span><em>slow</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onSlow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onSlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when slow button is clicked. Set slow variable.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onStartScan">
<code class="descname">onStartScan</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onStartScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onStartScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the scan</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onStartScript">
<code class="descname">onStartScript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onStartScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onStartScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when start script button clicked. Starts the script and disables some aspects of the script GUI</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onStopScript">
<code class="descname">onStopScript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onStopScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onStopScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when stop script button is clicked. Sets stopped variable and wakes up all waitConditions.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.onStopScriptAndScan">
<code class="descname">onStopScriptAndScan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.onStopScriptAndScan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.onStopScriptAndScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when stop script and scan button is clicked.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.plotList">
<code class="descname">plotList</code><span class="sig-paren">(</span><em>xList</em>, <em>yList</em>, <em>traceName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.plotList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.plotList" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot [x1, x2,...], [y1, y2,...] to traceName</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.scriptCommand">
<code class="descname">scriptCommand</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.scriptCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.scriptCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for script commands.</p>
<p>Catches exceptions, sets the script exception variables, and wakes the script after the
specified action has been completed.</p>
</dd></dl>

<dl class="method">
<dt id="scripting.ScriptHandler.ScriptHandler.writeToConsole">
<code class="descname">writeToConsole</code><span class="sig-paren">(</span><em>message</em>, <em>error=False</em>, <em>color=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripting/ScriptHandler.html#ScriptHandler.writeToConsole"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scripting.ScriptHandler.ScriptHandler.writeToConsole" title="Permalink to this definition">¶</a></dt>
<dd><p>write a message to the console.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="docs.html" class="btn btn-neutral" title="Code Documentation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>